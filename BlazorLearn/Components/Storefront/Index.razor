@page "/store"

@using BlazorLearn.Data.DTOs
@inject BlazorLearn.Services.Abstractions.ICatalogReadService Catalog

<!-- Slider -->
<Components.Storefront.HeroSlider Slides="slides" />

<!-- Categories -->
<Components.Storefront.CategoryStrip Items="categories" CssClass="mt-3" />

<!-- Products -->
<section class="mt-4">
    <div class="d-flex align-items-center mb-2">
        <h5 class="m-0">محصولات پیشنهادی</h5>
        <a class="ms-auto small text-secondary" href="/category/featured">مشاهده همه</a>
    </div>
    <Components.Storefront.ProductsGrid Items="products" />
</section>

@code {
    private List<SlideDto> slides = new();
    private List<CategoryDto> categories = new();
    private List<ProductDto> products = new();

    protected override async Task OnInitializedAsync()
    {
        slides = (await Catalog.GetSlidesAsync()).ToList();
        categories = (await Catalog.GetCategoriesAsync()).ToList();
        products = (await Catalog.GetFeaturedProductsAsync(12)).ToList();
    }
}
